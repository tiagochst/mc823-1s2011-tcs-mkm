\documentclass[10pt,a4paper]{article}
\usepackage[T1]{fontenc}
\usepackage[brazil]{babel}
\usepackage[utf8]{inputenc}


\usepackage{ae,aecompl}
\usepackage{pslatex}
\usepackage{epsfig}
\usepackage{geometry}
\usepackage{url}
\usepackage{textcomp}
\usepackage{ae}
\usepackage{subfig}
\usepackage{indentfirst}
\usepackage{textcomp}
\usepackage{color}
\usepackage{setspace}
\usepackage{verbatim}


% Definindo as margens para 2cm e o espaçamento entre linhas para 1.5
% Relatório parcial deve ter espaçamento simples
 \linespread{1.5}

\geometry{ 
  a4paper,	% Formato do papel
  tmargin=40mm,	% Margem superior
  bmargin=20mm,	% Margem inferior
  lmargin=20mm,	% Margem esquerda
  rmargin=20mm,	% Margem direita
  footskip=20mm	% Espaço entre o rodapé e o fim do texto
}
\include{abaco} 
\renewcommand{\thetable}{\Roman{table}}
\newcommand{\x} {$\bullet$}


\begin{document}

% CAPA
\begin{titlepage}
  \thispagestyle{empty}
  \begin{center} {\large \textbf{UNIVERSIDADE~ESTADUAL~DE~CAMPINAS}} \end{center}
  \begin{center} {\large INSTITUTO~DE~COMPUTAÇÃO}                    \end{center}
  \vspace{0.1cm}
  \begin{center}
    \begin{minipage}[tl]{31mm}
      \ABACO{1}{9}{6}{9}{1}
    \end{minipage}
  \end{center}
  \vspace{0.3cm}
  \begin{center} 
    {\large \textsc{Servidor de Agenda baseado em socket TCP
      }} 
    \\\vspace{0.5cm}
    {\textsl{Relatório do primeiro laboratório de MC823}}
    \\\vspace{1cm}
    \begin{tabular}{ll}
      \textbf{Aluno}:        Marcelo~Keith~Matsumoto   &  \textbf{RA}:       085937 \\
   %   \textbf{Turma}:       & A \\
      \textbf{Aluno}:        Tiago~Chedraoui~Silva    &   \textbf{RA}:       082941 \\
   
    \end{tabular}
  \end{center}
  \vspace{0.5cm}

  \begin{abstract}

  \end{abstract}

  % Sumário
  \tableofcontents
\end{titlepage} 



% -----------------------------------------------------------------------------%
\section{Introdução}
% -----------------------------------------------------------------------------%
  Este laboratório tem o objetivo de medir o tempo total e de comunicação de uma conexão TCP entre um cliente e um servidor.

% -----------------------------------------------------------------------------%
\section{Servidor de agenda}
% -----------------------------------------------------------------------------%
  O sistema implementado se baseia numa comunicação cliente-servido O cliente possui todas as informações da agenda, assim como a estrutura dos menus. O cliente só escolhe alguma opção do menu e insere as informações de um compromisso, como nome, dia, hora e minuto.

% -----------------------------------------------------------------------------%
\section{Ambiente de implementação}
% -----------------------------------------------------------------------------%
  O sistema de agenda foi implementado na linguagem C. Os dados da agenda foram armazenados em arquivos, onde o servidor lê quando um usuário loga no sistema de agenda e os armazena em memória. A cada alteração na agenda o servidor atualiza as informações dos arquivos.

\section{Tempos de comunicação e total}
O round-trip time (RTT) é o tempo que leva-se para um sinal ser
enviado mais o tempo que se leva para receber um acknowledgment que o
sinal foi recebido. A ferramenta administrativa para as redes de
computadores denominada ``Ping'' é usada para testar se um host é alcançável e para
medir o RTT para mensagens enviadas do host remetente para o
destinatário.

Inicialmente, implementamos um programa semelhante ao ping para o
cálculo da RTT. Com ele foi possível calcular várias vezes o tempo de envio pacote
de 1 byte para o servidor e esse responder com um pacote de 4
bytes. Utilizando um script para a coleta dos tempo, obtivemos o
seguintes valores:

\begin{table}[h!]
\caption{Ping implementado}
\begin{center}
  \begin{tabular}{lr}
    \multicolumn{1}{c}{Valor} & \multicolumn{1}{c}{Tempo}\\
    \hline
    Max & 17.814 ms\\
    Min & 0.045 ms\\
    Média & 0.059 ms \\
    Desvio & 0.232 ms
  \end{tabular}

\end{center}
\end{table}

Posteriormente, aplicamos o cálculo de tempo ao programa principal de
forma a obtermos o tempo total e tempo de comunicação.
Para o tempo total, no cliente pega-se  o tempo antes do primeiro send e após o último recv.
Para o tempo de comunicação, no servidor pega-se o tempo após o
primeiro recv e antes do último send.
Subtraindo o segundo do primeiro você tem o tempo estimado de ida e
volta de um pacote. 

O resultado obtido para 100 valores foi:

\begin{table}[h!]
\caption{Teste 1: conexão e fechamento de conexão com servidor}
\begin{center}
  \begin{tabular}{lr}
    \multicolumn{1}{c}{Valor} & \multicolumn{1}{c}{Tempo}\\
    \hline
    Max & 4.986 ms\\
    Min & 0.097 ms\\
    Média & 0.608 ms \\
    Desvio & 0.008 ms
  \end{tabular}

\end{center}
\end{table}

\begin{table}[h!]
\caption{Teste 2: conexão, login na conta, ver agenda do mês e fechamento de conexão com servidor}
\begin{center}
  \begin{tabular}{lr}
    \multicolumn{1}{c}{Valor} & \multicolumn{1}{c}{Tempo}\\
    \hline
    Max & 4.959 ms\\
    Min & 0.190 ms\\
    Média & 0.638 ms \\
    Desvio & 0.013 ms
  \end{tabular}

\end{center}
\end{table}

Comparando os resultados, como o ping é muito rápido nossa precisão é
muito baixa. Porém nosso programa não é tão rápido assim os valores
são mais precisos. Para certificarmos do tmepo, fizemos o teste com
três situações, uma mais rápida, uma mais lenta. E obtemos valores
muito próximos da média de tempo de ida e volta de um pacote(RTT). 

\section{Conclusão}

% ******************************************************
% REFERENCIAS BIBLIOGRÁFICAS
% ******************************************************
% \section{Referências}
\bibliographystyle{plain}
\begin{small}
  \bibliography{referencias}
\end{small}

\end{document}
